name = "features_demo"
version = "0.1.0" 
license = "MIT"
description = "Demo package for FPM features functionality"

[[executable]]
name = "features_demo"
source-dir = "app"
main = "main.f90"

[features]
# Base debug feature
debug.flags = "-g"
debug.preprocess.cpp.macros = "DEBUG"

# Release feature  
release.flags = "-O3"
release.preprocess.cpp.macros = "RELEASE"

# Compiler-specific features
debug.gfortran.flags = "-Wall -fcheck=bounds"
release.gfortran.flags = "-mtune=generic -funroll-loops"

# Platform-specific features
linux.preprocess.cpp.macros = "LINUX_BUILD"

# Parallel features
mpi.preprocess.cpp.macros = "USE_MPI"
mpi.dependencies.mpi = "*"
openmp.preprocess.cpp.macros = "USE_OPENMP"
openmp.dependencies.openmp = "*"

# Features for testing dependency profile resolution
prof_feat1.preprocess.cpp.macros = "PROF_FEAT1"
prof_feat2.preprocess.cpp.macros = "PROF_FEAT2"

[profiles]
development = ["debug"]
production = ["release", "openmp"]
prof_feats = ["prof_feat1", "prof_feat2"]
